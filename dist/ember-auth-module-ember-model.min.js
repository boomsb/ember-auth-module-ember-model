// Generated by EmberScript 0.0.7
var get$=Ember.get;Em.onLoad("Ember.Application",function(e){return e.initializer({name:"ember-auth.module.ember-model",before:"ember-auth-load",initialize:function(e,t){return t.register("authModule:emberModel",get$(get$(Em,"Auth"),"EmberModelAuthModule"))}})});var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"EmberModelAuthModule",Ember.Object.extend({init:function(){return null!=get$(this,"config")||set$(this,"config",get$(get$(this,"auth"),"emberModel")),this.patch(),get$(this,"auth").reopen({user:get$(Em,"computed").alias("module.emberModel.user")}),get$(this,"auth").addHandler("signInSuccess",get$(this,"findUser")),get$(this,"auth").addHandler("signInError",get$(this,"clearUser")),get$(this,"auth").addHandler("signOutSuccess",get$(this,"clearUser"))},user:null,findUser:function(){var e,t;if(null==get$(get$(this,"auth"),"userId")||!(e=Em.get(get$(get$(this,"config"),"userModel"))))return;return e.fetch(get$(get$(this,"auth"),"userId")).then((t=this,function(e){return set$(t,"user",e)}))},clearUser:function(){return set$(this,"user",null)},patch:function(){var e;return e=this,Ember.RESTAdapter.reopen({_ajax:function(t,n,r,i){return this._super(t,n,r,get$(get$(e,"auth"),"_strategy").serialize(i||{}))}})}}));var get$=Ember.get;get$(Em,"Auth").reopen({emberModel:{userModel:!1}});